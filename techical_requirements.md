# 1. Цель проекта
Цель проекта - разработать настраеваемый движок для воспроизведения последовательности звуков при определённом событии в игре GTA San-Andreas MultiPlayer (далее Движок). Так как я не представляю, для каких ещё целей может использоваться Движок, первоочередной задачей будет разработка полицейского диспетчера для разных серверов. Этот проект предназначен для эстетического удовольствия игрока, а также создания более серьёзного отношения к происходящему в игре (иначе говоря, для погружения в игру за полицейского). Поэтому название проекта PoliceDispatchLua.

# 2. Описание Движка
Движок состоит из следующих функциональных блоков:
1. Функционал хранения, чтения и записи условий для работы Движка на определённом сервере SAMP (далее Условия) в JSON файле. По-умолчанию, один JSON файл обозначает Условия для одного SAMP-сервера или группы SAMP-серверов, параметры обнаружения которых задаются в Условиях.
2. Функционал обнаружения игровых событий, указанных в Условиях.
3. Функционал записи данных из строки из SAMP чата под именем, заданным в Условиях для дальнейшнего использования.
4. Функционал воспроизведения указанных в Условиях звуковых файлов (в виде пути к файлу).
5. Функционал создания определённых шаблонов последовательности звуков как сниппета (?), их дальнейшее хранение для использования без необходимости вписывать одни и те же последовательности звуков.
6. Функционал GUI интерфейса, в котором можно редактировать условия работы движка прямо в игре.
7. Функционал пользовательских настроек скрипта в INI файле.
8. Функционал «возбуждения» от активной ситуации, что может включиться автоматически (с подтверждением или без) или по запросу игрока в GUI интерфейсе. В состоянии активной ситуации будут воспроизводится переговоры в зависимости от типа ситуации. Тип ситуации будет подстраиваться под действия, что совершается на ситуации: если саспект начнёт стрелять, то соответствующие звуки; если саспект нанесёт damage авто ПД, то аналогично. Механика похожа на мою хуйню со скриптом имитирования активности в /copchase.

## 2.1. Условия работы движка в JSON файле
Форма, по которой составляются Условия, должна быть лаконичной и минималистичной. Для каждого Условия доступна 

## 2.5. Шаблоны
Хранение шаблонов для работы Движка должно осуществляться в JSON файле.

## 2.7. INI файл
Архитектура INI файла следующая:
1. settings
1.1. Значение общей громкости. (volume=int)
1.2. Включён или отключён Движок? (state=bool)
1.3. Требуется ли проверка обновлений для Движка? (isCheckUpdate=bool)
1.4. Игнорировать ли сообщения, что пришли, пока игрок был AFK? (isIgnoreMessagesWhenPlayerAFK=bool)
2. volume
2.1. Пользовательские значения громкости для како

# 3. Файловая архитектура Движка
Файловая архитектура Движка должна быть представлена следующим образом:
1. Папка с файлами конфигурации Движка. В ней допустимо хранить JSON и INI файлы.
    1.1. Папка "servers" 
        1.1.1. JSON файлы с Условиями для определённого сервера. Название этого JSON файла будет выведено в GUI интерфейсе.
    1.2. Файл config.ini. О нём читай в пункте 2.7.
2. Папка с звуковыми файлами, что будет использоваться. В ней допустимо хранить файлы звукового формата.
    2.1. Папка со звуковыми файлами, что относятся к объявлению диспетчером района карты SAMP.
    2.2. Папка со звуковыми файлами, что относятся к объявлению диспетчером типа автомобиля.
    2.3. Папка со звуковыми файлами, что относятся к объявлению диспетчером определённого цвета.
    2.4. Папка со звуковыми файлами, что относятся к объявлению диспетчером определённого TEN-кода (полицейского кода начинающегося с цифры 10).
    2.5. Звук срабатывания рации.
От криков на код 1/код 0 лучше отказаться :(

У меня так себе, наверное, получилось :с


Скрипт представляет собой скелет, на который требуется натянуть "кожу". Говоря иначе, разработчик в первую очередь стремиться сделать скрипт универсальным и подходящим под любой сервер, а уже во вторую сделать скрипт под Аризону, Адванс или Даймонд. До версии 3.0 настройка скрипта была сложным делом и десятки часов переписки автора с желающими получить работающий голосовой диспетчер под свой сервер тому подтверждение. Чтение лекций о программировании, хотя и были интересным занятием, не были продуктивными и в итоге приходилось делать всё самому. Поэтому было решено спроектировать настройку Виртуального Ассистента с помощью технологии imGui.

Перед разработчиком также встала проблема распространения конфига: мало кто хочет настраивать всё самостоятельно. Поэтому решено сделать подраздел конфигов (конфигурация - настройка) для серверов в теме скрипта на Blasthack. Каждый игрок может создать свою конфигурацию скрипта для любого сервера и разместить её в данном подразделе.

Скрипт гибкий и может использоваться не только как голосовой полицейский диспетчер. Всё зависит от фантазии игроков :)

Автор оставляет за собой право на авторство.


Этот скрипт берёт на себя задачу озвучивание сообщений в чате в формате обращения диспетчера к полицейским. Скрипт создан для того, чтобы создать атмосферу и не дать заскучать полицейским в одиночную смену, когда ты один сидишь в Тим Спике. Именно затем я его и решил создать.

Сначала я разработал его только для Тринити РП, а затем мне написал Brothers in Company с просьбой адаптировать его под другие сервера. Я же решил не мелочиться и создать универсальную костыльную систему для всех серверов. Сука (реально!)